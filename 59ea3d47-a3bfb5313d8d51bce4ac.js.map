{"version":3,"sources":["webpack://alloy-sandbox/./src/components/ProductCardGrid/index.js"],"names":["additionalFilters","title","value","filter","products","sort","lastUpdatedA","lastUpdated","lastUpdatedB","Date","nameA","name","nameB","localeCompare","ids","filteredProducts","forEach","productId","product","find","id","push","ProductCardGrid","clouds","interaction","orderBy","filterByCloud","filterByIds","length","defaultFilter","useState","additionalFilter","setAdditionalFilter","setFilteredProducts","cloudFilter","setCloudFilter","useEffect","cloud","some","selectedCloud","selectedFilter","filterByClouds","height","width","className","css","DESKTOP_SCREEN_WIDTH","isQuiet","items","slice","map","selected","aria-label","onChange","index","i","key","checked","role","tabIndex","icon","src","aria-hidden","alt","description","discover","A","href","variant","docs"],"mappings":"2cAyBA,IA8CMA,EAAoB,CACxB,CACEC,MAAO,eACPC,MAAO,eACPC,OA3BwB,SAAAC,GAAQ,OAClCA,EAASC,MACP,cAAmE,IAAnDC,EAAkD,EAA/DC,YAA4CC,EAAmB,EAAhCD,YAChC,OAAI,IAAIE,KAAKD,GAAgB,IAAIC,KAAKH,GAC7B,EACE,IAAIG,KAAKD,GAAgB,IAAIC,KAAKH,IACnC,EAEH,OAqBX,CACEL,MAAO,OACPC,MAAO,OACPC,OArCiB,SAAAC,GAAQ,OAC3BA,EAASC,MAAK,kBAASK,EAAT,EAAGC,KAAuBC,EAA1B,EAAoBD,KAApB,OACZD,EAAMG,cAAcD,QAqCtB,CACEX,MAAO,SACPC,MAAO,KACPC,OAzBe,SAACC,EAAUU,QAAa,IAAbA,MAAM,IAClC,IAAMC,EAAmB,GAOzB,OANAD,EAAIE,SAAQ,SAAAC,GACV,IAAMC,EAAUd,EAASe,MAAK,qBAAGC,KAAgBH,KAC7CC,GACFH,EAAiBM,KAAKH,MAGnBH,K,89CAqBHO,EAAkB,SAAC,GAOlB,IAAD,IANJC,cAMI,MANK,GAML,MALJnB,gBAKI,MALO,GAKP,MAJJoB,mBAII,aAHJC,eAGI,MAHM,eAGN,MAFJC,qBAEI,MAFY,GAEZ,MADJC,mBACI,MADU,GACV,EACAA,EAAYC,SACdH,EAAU,MAGZ,IAAMI,EAAgB7B,EAAkBmB,MACtC,qBAAGjB,QAAsBuB,KAE3BI,EAAcf,IAAMa,EAEpB,OAAgDG,cAASD,EAAc3B,OAAhE6B,EAAP,KAAyBC,EAAzB,KACA,GAAgDF,cAC9CD,EAAc1B,OAAOC,EAAUyB,EAAcf,MADxCC,EAAP,KAAyBkB,EAAzB,KAGA,GAAsCH,cAASJ,GAAxCQ,EAAP,KAAoBC,EAApB,MAEAC,gBAAU,YAvFW,SACrBhC,EACA8B,EACAH,EACAE,GAEA,IAAMlB,EAAmBX,EAASD,QAAO,gBAAGkC,EAAH,EAAGA,MAAH,OACvCH,EAAYI,MAAK,SAAAC,GAAa,OAAIF,IAAUE,QAExCC,EAAiBxC,EAAkBmB,MACvC,qBAAGjB,QAAsB6B,KAG3BE,EACEO,EAAerC,OAAOY,EAAkByB,EAAe1B,MA0EvD2B,CACErC,EACA8B,EAAYN,OAASM,EAAcX,EACnCQ,EACAE,KAED,CAACC,EAAaH,IAEjB,IAAMW,EACJ,+FACIC,EACJ,+FAEF,OACE,mBACEC,UAAS,kBACTC,KAAKA,QAAF,aACYC,KADZ,+DAKFtB,IACC,eACEqB,IAAG,IAQH,QAAC,IAAD,CACEE,SAAO,EACPC,MAAOhD,EAAkBiD,MAAM,EAAG,GAAGC,KAAI,SAAA/C,GACvC,OAAOA,EAAOD,QAAUuB,E,qWAAjB,EAED0B,UAAU,GACPhD,GAELA,KAENiD,aAAW,yCACXC,SAAU,SAAAC,GACRtB,EAAoBhC,EAAkBsD,GAAOpD,YAKrD,eACE2C,KAAKA,QAAF,8CAE+BC,KAF/B,iDAQFtB,IACC,eACEqB,IAAG,IAOH,eACEA,IAAG,IAMH,cACED,UAAU,4CACVC,IAAG,GAFL,cASA,eACEA,IAAG,GAMFtB,EAAO2B,KAAI,SAACb,EAAOkB,GAAR,OACV,QAAC,IAAD,CACEC,IAAKD,EACLrD,MAAOmC,EACPgB,SAAU,SAAAI,GAENtB,EADEsB,EACa,GAAD,eAAKvB,GAAL,CAAkBG,IAG9BH,EAAY/B,QAAO,SAAAA,GAAM,OAAIA,IAAWkC,OAI9CQ,IAAG,GAIFR,UAOb,eACEQ,IAAG,IAIH,eACEA,KAAKA,QAAF,uDAEyCF,EAFzC,oBAGiBD,EAHjB,uGAO+BI,KAP/B,4FAcF/B,EAAiBmC,KAAI,SAAAhC,GAAO,OAC3B,eACEsC,IAAKtC,EAAQE,GACbsC,KAAK,SACLC,SAAS,IACTf,UAAU,gBACVC,KAAKA,QAAF,SACQF,EADR,WAESD,EAFT,8FAQ+BI,KAR/B,oBAaH,eACEF,UAAU,qBACVC,IAAG,IAMH,mBACG3B,EAAQ0C,OACP,eACEf,IAAG,IAQH,QAAC,IAAD,CAAOgB,IAAK3C,EAAQ0C,KAAME,cAAY,OAAOC,IAAI,QAIvD,eACEnB,UAAU,kEACVC,IAAG,IAOH,eACED,UAAU,sBACVC,IAAG,IAIH,sBAAS3B,EAAQP,SAGrB,eACEiC,UAAU,2DACVC,IAAG,GAKF3B,EAAQ8C,eAGb,eAAKpB,UAAU,yBACb,eACEC,KAAKA,QAAF,2NAQ+BC,KAR/B,kCAaF5B,EAAQ+C,WACP,eACEpB,IAAG,IAIH,QAAC,EAAAqB,EAAD,CACEnB,SAAO,EACPoB,KAAMjD,EAAQ+C,SACdG,QAAQ,aAHV,eAUHlD,EAAQmD,OACP,eACExB,IAAG,IAIH,QAAC,EAAAqB,EAAD,CAAcC,KAAMjD,EAAQmD,KAAMD,QAAQ,WAA1C","file":"59ea3d47-a3bfb5313d8d51bce4ac.js","sourcesContent":["/*\n * Copyright 2020 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\n// TODO reuse ProductCard\n\nimport React, { useState, useEffect } from \"react\";\nimport { css } from \"@emotion/react\";\nimport { AnchorButton } from \"../AnchorButton\";\nimport { Checkbox } from \"../Checkbox\";\nimport { Picker } from \"../Picker\";\nimport \"@spectrum-css/typography\";\nimport \"@spectrum-css/card\";\nimport { Image } from \"../Image\";\nimport { DESKTOP_SCREEN_WIDTH } from \"../../utils\";\nimport PropTypes from \"prop-types\";\n\nconst filterByClouds = (\n  products,\n  cloudFilter,\n  additionalFilter,\n  setFilteredProducts\n) => {\n  const filteredProducts = products.filter(({ cloud }) =>\n    cloudFilter.some(selectedCloud => cloud === selectedCloud)\n  );\n  const selectedFilter = additionalFilters.find(\n    ({ value }) => value === additionalFilter\n  );\n\n  setFilteredProducts(\n    selectedFilter.filter(filteredProducts, selectedFilter.ids)\n  );\n};\n\nconst filterByName = products =>\n  products.sort(({ name: nameA }, { name: nameB }) =>\n    nameA.localeCompare(nameB)\n  );\n\nconst filterByLastUpdated = products =>\n  products.sort(\n    ({ lastUpdated: lastUpdatedA }, { lastUpdated: lastUpdatedB }) => {\n      if (new Date(lastUpdatedB) > new Date(lastUpdatedA)) {\n        return 1;\n      } else if (new Date(lastUpdatedB) < new Date(lastUpdatedA)) {\n        return -1;\n      }\n      return 0;\n    }\n  );\n\nconst filterById = (products, ids = []) => {\n  const filteredProducts = [];\n  ids.forEach(productId => {\n    const product = products.find(({ id }) => id === productId);\n    if (product) {\n      filteredProducts.push(product);\n    }\n  });\n  return filteredProducts;\n};\n\nconst additionalFilters = [\n  {\n    title: \"Last updated\",\n    value: \"last_updated\",\n    filter: filterByLastUpdated\n  },\n  {\n    title: \"Name\",\n    value: \"name\",\n    filter: filterByName\n  },\n  {\n    title: \"Custom\",\n    value: \"id\",\n    filter: filterById\n  }\n];\n\nconst ProductCardGrid = ({\n  clouds = [],\n  products = [],\n  interaction = false,\n  orderBy = \"last_updated\",\n  filterByCloud = [],\n  filterByIds = []\n}) => {\n  if (filterByIds.length) {\n    orderBy = \"id\";\n  }\n\n  const defaultFilter = additionalFilters.find(\n    ({ value }) => value === orderBy\n  );\n  defaultFilter.ids = filterByIds;\n\n  const [additionalFilter, setAdditionalFilter] = useState(defaultFilter.value);\n  const [filteredProducts, setFilteredProducts] = useState(\n    defaultFilter.filter(products, defaultFilter.ids)\n  );\n  const [cloudFilter, setCloudFilter] = useState(filterByCloud);\n\n  useEffect(() => {\n    filterByClouds(\n      products,\n      cloudFilter.length ? cloudFilter : clouds,\n      additionalFilter,\n      setFilteredProducts\n    );\n  }, [cloudFilter, additionalFilter]);\n\n  const height =\n    \"calc(var(--spectrum-global-dimension-size-4600) - var(--spectrum-global-dimension-size-500))\";\n  const width =\n    \"calc(var(--spectrum-global-dimension-size-4600) - var(--spectrum-global-dimension-size-800))\";\n\n  return (\n    <section\n      className={`spectrum--light`}\n      css={css`\n        max-width: ${DESKTOP_SCREEN_WIDTH};\n        margin: var(--spectrum-global-dimension-size-400) auto;\n      `}\n    >\n      {interaction && (\n        <div\n          css={css`\n            display: flex;\n            align-items: center;\n            height: var(--spectrum-global-dimension-size-800);\n            justify-content: flex-end;\n            margin-right: var(--spectrum-global-dimension-size-400);\n          `}\n        >\n          <Picker\n            isQuiet\n            items={additionalFilters.slice(0, 2).map(filter => {\n              return filter.value === orderBy\n                ? {\n                    selected: true,\n                    ...filter\n                  }\n                : filter;\n            })}\n            aria-label=\"Filter by name or last updated product\"\n            onChange={index => {\n              setAdditionalFilter(additionalFilters[index].value);\n            }}\n          />\n        </div>\n      )}\n      <div\n        css={css`\n          display: flex;\n          @media screen and (max-width: ${DESKTOP_SCREEN_WIDTH}) {\n            align-items: flex-start;\n            flex-wrap: wrap;\n          }\n        `}\n      >\n        {interaction && (\n          <div\n            css={css`\n              display: flex;\n              align-items: flex-end;\n              width: var(--spectrum-global-dimension-size-3000);\n              flex-direction: column;\n            `}\n          >\n            <div\n              css={css`\n                display: flex;\n                align-items: flex-start;\n                flex-direction: column;\n              `}\n            >\n              <h4\n                className=\"spectrum-Heading spectrum-Heading--sizeXS\"\n                css={css`\n                  margin-bottom: var(--spectrum-global-dimension-size-100);\n                `}\n              >\n                Filter by\n              </h4>\n\n              <div\n                css={css`\n                  margin-top: var(--spectrum-global-dimension-size-100);\n                  display: flex;\n                  flex-direction: column;\n                `}\n              >\n                {clouds.map((cloud, i) => (\n                  <Checkbox\n                    key={i}\n                    value={cloud}\n                    onChange={checked => {\n                      if (checked) {\n                        setCloudFilter([...cloudFilter, cloud]);\n                      } else {\n                        setCloudFilter(\n                          cloudFilter.filter(filter => filter !== cloud)\n                        );\n                      }\n                    }}\n                    css={css`\n                      margin-bottom: var(--spectrum-global-dimension-size-100);\n                    `}\n                  >\n                    {cloud}\n                  </Checkbox>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n        <div\n          css={css`\n            flex: 1;\n          `}\n        >\n          <div\n            css={css`\n              display: grid;\n              grid-template-columns: repeat(auto-fit, ${width});\n              grid-auto-rows: ${height};\n              justify-content: center;\n              gap: var(--spectrum-global-dimension-size-400);\n\n              @media screen and (max-width: ${DESKTOP_SCREEN_WIDTH}) {\n                margin-top: var(--spectrum-global-dimension-size-400);\n                display: flex;\n                flex-wrap: wrap;\n              }\n            `}\n          >\n            {filteredProducts.map(product => (\n              <div\n                key={product.id}\n                role=\"figure\"\n                tabIndex=\"0\"\n                className=\"spectrum-Card\"\n                css={css`\n                  width: ${width};\n                  height: ${height};\n\n                  &:hover {\n                    border-color: var(--spectrum-global-color-gray-200);\n                  }\n\n                  @media screen and (max-width: ${DESKTOP_SCREEN_WIDTH}) {\n                    width: 0;\n                  }\n                `}\n              >\n                <div\n                  className=\"spectrum-Card-body\"\n                  css={css`\n                    height: var(--spectrum-global-dimension-size-3000);\n                    overflow: auto;\n                    text-align: left;\n                  `}\n                >\n                  <div>\n                    {product.icon && (\n                      <div\n                        css={css`\n                          height: var(--spectrum-global-dimension-size-600);\n                          width: var(--spectrum-global-dimension-size-600);\n                          margin-bottom: var(\n                            --spectrum-global-dimension-size-200\n                          );\n                        `}\n                      >\n                        <Image src={product.icon} aria-hidden=\"true\" alt=\"\" />\n                      </div>\n                    )}\n                  </div>\n                  <div\n                    className=\"spectrum-Card-header spectrum-Heading spectrum-Heading--sizeXXS\"\n                    css={css`\n                      margin-top: 0 !important;\n                      margin-bottom: var(\n                        --spectrum-global-dimension-size-100\n                      ) !important;\n                    `}\n                  >\n                    <div\n                      className=\"spectrum-Card-title\"\n                      css={css`\n                        font-size: var(--spectrum-global-dimension-size-200);\n                      `}\n                    >\n                      <strong>{product.name}</strong>\n                    </div>\n                  </div>\n                  <div\n                    className=\"spectrum-Card-content spectrum-Body spectrum-Body--sizeS\"\n                    css={css`\n                      height: auto;\n                      margin-bottom: 0 !important;\n                    `}\n                  >\n                    {product.description}\n                  </div>\n                </div>\n                <div className=\"spectrum-Card-footer\">\n                  <div\n                    css={css`\n                      display: flex;\n                      justify-content: flex-end;\n                      flex-wrap: wrap;\n                      --gap: var(--spectrum-global-dimension-size-200);\n                      margin: calc(-1 * var(--gap)) 0 0 calc(-1 * var(--gap));\n                      width: calc(100% + var(--gap));\n\n                      @media screen and (max-width: ${DESKTOP_SCREEN_WIDTH}) {\n                        justify-content: center;\n                      }\n                    `}\n                  >\n                    {product.discover && (\n                      <div\n                        css={css`\n                          margin: var(--gap) 0 0 var(--gap);\n                        `}\n                      >\n                        <AnchorButton\n                          isQuiet\n                          href={product.discover}\n                          variant=\"secondary\"\n                        >\n                          Learn more\n                        </AnchorButton>\n                      </div>\n                    )}\n\n                    {product.docs && (\n                      <div\n                        css={css`\n                          margin: var(--gap) 0 0 var(--gap);\n                        `}\n                      >\n                        <AnchorButton href={product.docs} variant=\"primary\">\n                          View docs\n                        </AnchorButton>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nProductCardGrid.propTypes = {\n  clouds: PropTypes.array,\n  products: PropTypes.array,\n  orderBy: PropTypes.string,\n  filterBy: PropTypes.array,\n  interaction: PropTypes.bool\n};\n\nexport { ProductCardGrid };\n"],"sourceRoot":""}